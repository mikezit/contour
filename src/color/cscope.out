cscope 15 /data/work/own/contour/src/color               0000004157
	@colormap.cpp

1 
	~"cÞÜm­.h
"

2 
	~<ÿs£¹
>

3 
	~<¡ršg
>

4 
	~<ùime
>

6 
	gCÞÜM­
::
	$CÞÜM­
()

8 
cÞÜM­
 = 
Ãw
 
¡d
::
m­
<,
Rgb
>;

9 
	}
}

11 
	gCÞÜM­
::~
	$CÞÜM­
()

14 
	}
}

16 
CÞÜM­
::
	$£tRªge
(
mšV®ue
,
maxV®ue
)

18 
max
 = 
maxV®ue
;

19 
mš
 = 
mšV®ue
;

20 
	`š™Ÿl
();

21 
	}
}

23 
Rgb
 
	gCÞÜM­
::
£bcÞÜs
[]={

24 
Rgb
(144,144,144),Rgb(0,0,255),Rgb(0,64,255),Rgb(0,95,255),

25 
Rgb
(0,127,255),Rgb(0,159,255),Rgb(0,191,255),Rgb(0,223,255),

26 
Rgb
(0,255,255),Rgb(32,255,223),Rgb(64,255,191),Rgb(95,255,159),

27 
Rgb
(127,255,127),Rgb(159,255,95),Rgb(191,255,64),Rgb(223,255,32),

28 
Rgb
(255,255,0),Rgb(255,223,0),Rgb(255,191,0),Rgb(255,159,0),

29 
Rgb
(255,127,0),Rgb(255,95,0),Rgb(255,64,0),Rgb(255,32,0),

30 
Rgb
(255,0,0),Rgb(255,0,64),Rgb(255,0,95),Rgb(255,0,127),

31 
Rgb
(255,0,159),Rgb(255,0,191),Rgb(255,0,223),Rgb(255,0,255)

34 
	gCÞÜM­
::
	$š™Ÿl
()

36 
¡•
 = (
max
 - 
mš
)/31;

37 
i
=0;i<=31;i++)

39 
cÞÜM­
->
	`š£¹
(
¡d
::
	`make_·œ
(
mš
+
¡•
*(
i
), 
£bcÞÜs
[i]));

40 
cÞÜšdex
.
	`push_back
(
mš
+
¡•
*
i
);

42 
	}
}

49 
	gCÞÜM­
::
	$š‹½o£
(
ba£
)

52 
	`as£¹
(
ba£
>0);

54 
i
,
k
,
j
;

55 
w
;

56 
šü—£CÞÜ
;

57 
šü—£S‹p
;

58 
¡¬tS‹p
;

59 
Rgb
 
c
;

60 
w
=1;

61 
k
=0;

62 
šü—£S‹p
 = 
¡•
/(
ba£
+1);

63 
i
=1;i<32;i++)

65 
¡¬tS‹p
 = 
mš
 + (
k
++)*
¡•
;

66 
j
=0;j<
ba£
;j++)

68 
w
=()
j
/
ba£
;

69 
c
=
	`Rgb
(

70 ()(
£bcÞÜs
[
i
-1].
	`»d
()+(£bcÞÜs[i].»d()-£bcÞÜs[i-1].»d())*
w
),

71 ()(
£bcÞÜs
[
i
-1].
	`g»’
()+(£bcÞÜs[i].g»’()-£bcÞÜs[i-1].g»’())*
w
),

72 ()(
£bcÞÜs
[
i
-1].
	`blue
()+(£bcÞÜs[i].blue()-£bcÞÜs[i-1].blue())*
w
)

74 
cÞÜM­
->
	`š£¹
(
¡d
::
	`make_·œ
(
¡¬tS‹p
+
šü—£S‹p
*
j
,
c
));

75 
cÞÜšdex
.
	`push_back
(
¡¬tS‹p
+
šü—£S‹p
*
j
);

79 
	`quicksÜt
(
cÞÜšdex
,0,cÞÜšdex.
	`size
()-1);

81 
	}
}

83 
Rgb
 
	gCÞÜM­
::
	$fšdIndex
(
key
)

85 if(
key
 <ð
mš
è 
cÞÜM­
->
	`fšd
(mš)->
£cÚd
;

86 if(
key
 >ð
max
è 
cÞÜM­
->
	`fšd
(max)->
£cÚd
;

88 
¡d
::
m­
<,
Rgb
>::
™”©Ü
 
™”
;

89 
ušt
 
cÞÜ
;

90 if((
™”
 =
cÞÜM­
->
	`fšd
(
key
)è!ðcÞÜM­->
	`’d
())

91  
™”
->
£cÚd
;

94 
Ëá
;

95 
right
;

96 
middË
;

97 
Ëá
 = 0;

98 
right
 = 
cÞÜM­
->
	`size
()-1;

99 
middË
 =0;

100 
Ëá
 <ð
right
){

101 
middË
 = (
Ëá
+
right
)/2;

102 if(
cÞÜšdex
.
	`©
(
middË
)==
key
)

103  
cÞÜM­
->
	`fšd
(
key
)->
£cÚd
;

104 if(
cÞÜšdex
.
	`©
(
middË
)<
key
)

105 
Ëá
 = 
middË
 + 1;

107 
right
 = 
middË
 - 1;

110  
cÞÜM­
->
	`fšd
(
cÞÜšdex
.
	`©
(
middË
))->
£cÚd
;

111 
	}
}

113 
	gCÞÜM­
::
·¹™iÚ
(
¡d
::
veùÜ
<> &
a
, 
Ëá
,
right
,
pivÙIndex
)

116 
	gpivÙV®ue
 = 
a
[
pivÙIndex
];

117 
sw­
(
a
,
pivÙIndex
,
right
);

118 
	g¡ÜeIndex
 = 
Ëá
;

119 
	gi
=
Ëá
;i<=
right
-1;i++)

121 if(
	ga
[
i
]<=
pivÙV®ue
)

123 
sw­
(
a
,
¡ÜeIndex
,
i
);

124 
	g¡ÜeIndex
 += 1;

127 
sw­
(
a
,
right
,
¡ÜeIndex
);

128  
	g¡ÜeIndex
;

131 
	gCÞÜM­
::
quicksÜt
(
¡d
::
veùÜ
<> &
a
, 
Ëá
, 
right
)

133 ià(
	gright
 > 
	gËá
)

135 
	gpivÙNewIndex
 = 
·¹™iÚ
(
a
, 
Ëá
, 
right
,(left+right)/2);

136 
quicksÜt
(
a
, 
Ëá
, 
pivÙNewIndex
-1);

137 
quicksÜt
(
a
, 
pivÙNewIndex
+1, 
right
);

	@colormap.h

1 #iâdeà
COLORMAP_H


2 
	#COLORMAP_H


	)

4 
	~<veùÜ
>

5 
	~<m­
>

6 
	~<hash_m­
>

8 
	sRgb


10 
	mr
;

11 
	mg
;

12 
	mb
;

14 
»d
()

15 {  
	mr
; }

17 
g»’
()

18 {  
	mg
; }

20 
blue
()

21 {  
	mb
; }

23 
Rgb
(){}

24 
Rgb
(
r
, 
g
, 
b
)

26 
	mthis
->
	mr
ð
r
;

27 
	mthis
->
	mg
ð
g
;

28 
	mthis
->
	mb
ð
b
;

32 þas 
	cCÞÜM­


34 
	mpublic
:

36 
CÞÜM­
();

38 ~
CÞÜM­
();

40 
£tRªge
(
mšV®ue
,
maxV®ue
);

43 
š‹½o£
(
ba£
);

46 
Rgb
 
fšdIndex
(
key
);

48 
Rgb
* 
	$g‘CÞÜs
()

50  
£bcÞÜs
;

53 
´iv©e
:

55 
	`š™Ÿl
();

58 
	`quicksÜt
(
¡d
::
veùÜ
<> &
a
, 
Ëá
, 
right
);

61 
	`·¹™iÚ
(
¡d
::
veùÜ
<> &
a
, 
Ëá
,
right
,
pivÙIndex
);

63 
	`sw­
(
¡d
::
veùÜ
<> &
a
 , 
p
, 
q
)

65 
tmp
 = 
a
[
p
];

66 
a
[
p
]÷[
q
];

67 
a
[
q
]=
tmp
;

68 
	}
}

71 
	g¡d
::
m­
<,
	gRgb
> *
	gcÞÜM­
;

74 
	g¡d
::
veùÜ
<> 
cÞÜšdex
;

76 
Rgb
 
	g£bcÞÜs
[];

79 
	gmax
,
	gmš
;

82 
	g¡•
;

	@
1
.
1
/usr/include
2
24
colormap.cpp
colormap.h
